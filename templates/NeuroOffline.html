<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>F&M Neuroscience | Simplified</title>

  <!-- Custom CSS (replaces Tailwind) -->
  <style>
    :root {
      --primary: #002D72;
      --secondary: #C8102E;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-500: #6b7280;
      --gray-700: #374151;
    }

    * { box-sizing: border-box; font-family: Arial, sans-serif; }

    body {
      margin: 0;
      background: var(--gray-50);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Header */
    header {
      width: 100%;
      background: var(--primary);
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
    header h1 { font-size: 1.5rem; font-weight: bold; }
    header .header-right { display: flex; align-items: center; gap: 1rem; }
    .btn { padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.9rem; border: none; cursor: pointer; transition: 0.2s; }
    .btn-secondary { background: var(--secondary); color: white; }
    .btn-secondary:hover { background: #a70d26; }
    .tag { background: rgba(200,16,46,0.9); padding: 0.4rem 0.8rem; border-radius: 9999px; font-size: 0.9rem; font-weight: 500; }

    /* Layout Grid */
    main {
      flex: 1;
      max-width: 1200px;
      padding: 1.5rem;
      margin: auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    @media (min-width: 1024px) { main { grid-template-columns: repeat(3, 1fr); } }

    /* Cards */
    section {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      display: flex;
      flex-direction: column;
    }
    section h2 { font-size: 1.25rem; font-weight: bold; color: var(--primary); margin-bottom: 0.5rem; display: flex; align-items: center; }
    section h2 i { margin-right: 0.5rem; }
    .small-text { font-size: 0.875rem; color: var(--gray-500); }

    /* Toggle buttons */
    .toggle-btn {
      padding: 0.6rem 1rem;
      border-radius: 9999px;
      background: white;
      border: 1px solid var(--gray-200);
      cursor: pointer;
      transition: 0.2s;
      font-size: 0.9rem;
    }
    .toggle-btn:hover { border-color: var(--primary); color: var(--primary); }

    /* Hidden content */
    .hidden { display: none; }

    /* Lists */
    ul { padding-left: 1.2rem; }
    li { margin-bottom: 0.5rem; color: var(--gray-700); display: flex; align-items: start; }
    li i { margin-right: 0.4rem; }

    /* Course Count Blocks */
    .count-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1rem; }
    .count-box { text-align: center; padding: 1rem; border-radius: 0.5rem; }
    .count-primary { background: rgba(0,45,114,0.1); }
    .count-secondary { background: rgba(200,16,46,0.1); }
    .count-number { font-size: 2rem; font-weight: bold; margin-bottom: 0.25rem; }
    .count-text { font-size: 0.75rem; color: var(--gray-700); }

    /* FAQ */
    .faq-item { border: 1px solid var(--gray-200); border-radius: 0.5rem; overflow: hidden; }
    .faq-question { width: 100%; padding: 0.75rem 1rem; text-align: left; background: white; border: none; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; }
    .faq-question:hover { background: var(--gray-50); }
    .faq-answer { background: var(--gray-50); padding: 1rem; border-top: 1px solid var(--gray-200); font-size: 0.9rem; color: var(--gray-700); }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <h1>Neuroscience at Franklin & Marshall</h1>
    <div class="header-right">
      <a href="/" class="btn btn-secondary">← Back to Home</a>
      <span class="tag">Admitted Students Day</span>
    </div>
  </header>

  <!-- MAIN GRID -->
  <main>
    <!-- CARD 1 -->
    <section id="card-overview">
      <h2><i data-feather="info"></i> What is Neuroscience at F&M?</h2>
      <p id="directive" class="small-text">Click a button to see details.</p>

      <p id="Neurocontent">
        Neuroscience at F&amp;M lives in the Biological Foundations of Behavior (BFB) Program.
        It's an interdisciplinary major spanning biology, psychology, chemistry, physics, and mathematics.
      </p>

      <div style="display:flex; flex-wrap:wrap; gap:0.75rem; margin-bottom:1rem;">
        <button id="highlights" class="toggle-btn" data-target="#ovr-highlights" onclick="speakOnClick('highlights','Here are the ')">Program Highlights</button>
        <button class="toggle-btn" data-target="#ovr-contact">Department Contact</button>
      </div>

      <div id="ovr-highlights" class="hidden">
        <ul>
          <li><i data-feather="check-circle"></i>Interdisciplinary approach connecting molecules to mind.</li>
          <li><i data-feather="check-circle"></i>Strong foundations in biology, psychology, chemistry, and mathematics.</li>
          <li><i data-feather="check-circle"></i>Hands-on research opportunities in 12+ active labs from first year.</li>
        </ul>
      </div>

      <div id="ovr-contact" class="hidden">
        <p><strong>Head of Department:</strong> Professor Ryan T. Lacy</p>
        <p><strong>Email:</strong> rlacy@fandm.edu</p>
        <p><strong>Program:</strong> Biological Foundations of Behavior (BFB)</p>
      </div>

      <div style="margin-top:auto; padding-top:1rem; border-top:1px solid var(--gray-100);">
        <p style="font-size:0.9rem; color:var(--gray-500); font-style:italic;">"From molecules to mind." — F&amp;M Neuroscience</p>
      </div>
    </section>

    <!-- CARD 2 -->
    <section id="card-required">
      <h2><i data-feather="book"></i> Required Classes</h2>
      <p class="small-text">Click a button to see details.</p>

      <div id="glance-counts" class="count-grid">
        <div class="count-box count-primary">
          <div class="count-number" style="color:var(--primary);">15</div>
          <div class="count-text">Courses</div>
        </div>
        <div class="count-box count-secondary">
          <div class="count-number" style="color:var(--secondary);">3</div>
          <div class="count-text">Area Electives</div>
        </div>
        <div class="count-box count-primary">
          <div class="count-number" style="color:var(--primary);">12+</div>
          <div class="count-text">Student Labs</div>
        </div>
      </div>

      <div style="display:flex; flex-wrap:wrap; gap:0.75rem;">
        <button id="core" class="toggle-btn" data-target="#req-core" onclick="speakOnClick('core','These are the ')">Core Biology Courses</button>
        <button id="physmath" class="toggle-btn" data-target="#req-physmath" onclick="speakOnClick('physmath','These are the ')">Physical Sci & Math</button>
        <button id="neurofund" class="toggle-btn" data-target="#req-neurofund" onclick="speakOnClick('neurofund','These are the ')">Neuro Fundamentals</button>
        <button id="areastudies" class="toggle-btn" data-target="#req-areastudies" onclick="speakOnClick('areastudies','Here are some ')">Area Studies</button>
        <button id="research" class="toggle-btn" data-target="#req-research" onclick="speakOnClick('research','The research requirement includes ')">Research Requirement</button>
      </div>

      <div id="req-core" class="hidden">
        <ul>
          <li><i data-feather="book"></i>BIO 101 – Evolution, Ecology & Biodiversity</li>
          <li><i data-feather="book"></i>BIO 102 – Cell Biology & Genetics</li>
          <li><i data-feather="book"></i>BIO 200 – Integrative Biology</li>
        </ul>
      </div>

      <div id="req-physmath" class="hidden">
        <ul>
          <li><i data-feather="check"></i>CHM 111 – General Chemistry I</li>
          <li><i data-feather="check"></i>CHM 112 – General Chemistry II</li>
          <li><i data-feather="check"></i>CHM 211 – Organic Chemistry I</li>
          <li><i data-feather="check"></i>PHY 101 or PHY 111 – Physics</li>
          <li><i data-feather="check"></i>MAT 109 – Calculus I</li>
        </ul>
      </div>

      <div id="req-neurofund" class="hidden">
        <ul>
          <li><i data-feather="book"></i>BIO 240 – Neuroscience</li>
          <li><i data-feather="book"></i>PSY 351 – Biopsychology w/ Lab or PSY 27x – Biopsychology</li>
        </ul>
      </div>

      <!-- Area Studies and Research sections can be added similarly -->
    </section>

    <!-- CARD 3 – FAQ -->
    <section id="card-faq">
      <h2><i data-feather="help-circle"></i> Frequently Asked Questions</h2>
      <p class="small-text">Click a question to see the answer.</p>

      <div class="faq-item">
        <button class="faq-question" data-target="#faq1" onclick="speakOnClick('faq1')">
          <span>How early can I join a lab?</span>
          <i data-feather="chevron-down"></i>
        </button>
        <div id="faq1" class="faq-answer hidden">
          Many labs welcome first‑years. Ask faculty about reading groups and pilot projects.
        </div>
      </div>
    </section>
  </main>

  <!-- Scripts -->
  <script>
    // Toggle buttons
    document.querySelectorAll('.toggle-btn').forEach(btn => {
      const target = document.querySelector(btn.dataset.target);
      btn.addEventListener('click', () => { target.classList.toggle('hidden'); });
    });

    // FAQ toggles
    document.querySelectorAll('.faq-question').forEach(btn => {
      const target = document.querySelector(btn.dataset.target);
      const icon = btn.querySelector('i');
      btn.addEventListener('click', () => {
        target.classList.toggle('hidden');
        icon.style.transform = target.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
      });
    });

    function speakOnClick(sectionId, extra="") {
      var text = document.getElementById(sectionId)?.innerHTML || "";
      var full_text = extra + text;
      fetch("http://127.0.0.1:5001/speakOnClick", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ 'text': full_text })
      });
    }

    function speakWithMisty() {
      var text = document.getElementById("Neurocontent").innerHTML;
      var dir = document.getElementById("directive").innerHTML;
      var full = text + " " + dir;
      fetch("http://127.0.0.1:5001/speak", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ 'text': full })
      });
    }

    speakWithMisty();

    // Feather icons replacement
    document.querySelectorAll('i[data-feather]').forEach(i => {
      const name = i.getAttribute('data-feather');
      const svgNS = "http://www.w3.org/2000/svg";
      const svg = document.createElementNS(svgNS, "svg");
      svg.setAttribute("width", "16");
      svg.setAttribute("height", "16");
      svg.setAttribute("fill", "currentColor");
      svg.innerHTML = "<title>" + name + "</title>"; // minimal placeholder
      i.replaceWith(svg);
    });
  </script>

</body>
</html>
